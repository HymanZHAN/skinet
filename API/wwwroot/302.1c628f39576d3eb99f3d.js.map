{"version":3,"sources":["./src/app/shared/quantity-count/quantity-count.component.ts","./node_modules/rxjs/_esm2015/internal/operators/distinctUntilChanged.js","./src/app/shared/models/product-params.model.ts","./src/app/shop/shop.service.ts","./src/app/shop/product-details/product-details.component.html","./src/app/shop/product-details/product-details.component.ts","./src/app/shared/pagination-header/pagination-header.component.html","./src/app/shared/pagination-header/pagination-header.component.ts","./src/app/shared/pagination/pagination.component.html","./src/app/shared/pagination/pagination.component.ts","./src/app/shared/models/product.model.ts","./src/app/shop/product-item/product-item.component.ts","./src/app/shop/product-item/product-item.component.html","./src/app/shop/shop.component.html","./src/app/shop/shop-routing.module.ts","./src/app/shop/shop.component.ts","./src/app/shop/shop.module.ts"],"names":["QuantityCountComponent","count","incremented","decremented","this","emit","handleDecrement","handleIncrement","DistinctUntilChangedOperator","compare","keySelector","subscriber","source","subscribe","DistinctUntilChangedSubscriber","Subscriber","destination","super","hasKey","x","y","value","key","err","error","result","next","ProductParams","brandId","typeId","sort","pageIndex","pageSize","search","ShopService","http","baseUrl","environment","cacheKey","productParams","BehaviorSubject","productParams$","asObservable","pipe","a","b","isParamsEqual","lift","tap","params","Object","values","join","totalProductCount","totalProductCount$","products","Map","products$","switchMap","cachedResponse","get","of","data","getProducts","brands","brands$","types","types$","set","toString","map","resp","id","product","find","p","name","paramUpdates","newParams","ProductDetailsComponent","shopService","activatedRoute","bcService","basketService","productCount","loadProduct","idParam","snapshot","paramMap","getProduct","console","addItemToBasket","PaginationHeaderComponent","totalCount","PaginationComponent","_totalCount","_pageSize","pageSelected","isOnFirstPage","isOnLastPage","pages","pageCount","updateState","selectPage","Math","ceil","Array","fill","_","i","length","goToPrevPage","goToNextPage","EMPTY_PRODUCT","description","price","pictureUrl","productType","productBrand","ProductItemComponent","routes","path","component","ShopComponent","sortOptions","searchTerm$","vm$","combineLatest","obs","getBrands","getTypes","updateProductParams","event","target","index","breadcrumb","alias","ShopRoutingModule","ShopModule"],"mappings":"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","file":"302.1c628f39576d3eb99f3d.js","sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  EventEmitter,\r\n  ChangeDetectionStrategy,\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-quantity-count',\r\n  template: `\r\n    <div class=\"flex items-center\">\r\n      <button\r\n        (click)=\"handleDecrement()\"\r\n        class=\"cursor-pointer disabled:cursor-default disabled:pointer-events-none\"\r\n        [disabled]=\"count === 1\"\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          class=\"h-6 w-6\"\r\n          [attr.fill]=\"count === 1 ? '#818CF8' : '#4f46e5'\"\r\n          stroke=\"white\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n          />\r\n        </svg>\r\n      </button>\r\n      <span class=\"mx-2 w-4 flex justify-center\">\r\n        {{ count }}\r\n      </span>\r\n      <button\r\n        (click)=\"handleIncrement()\"\r\n        class=\"cursor-pointer disabled:cursor-default disabled:pointer-events-none\"\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          class=\"h-6 w-6\"\r\n          fill=\"#4f46e5\"\r\n          stroke=\"white\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  `,\r\n  styles: [],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class QuantityCountComponent {\r\n  @Input() count: number | null = 0;\r\n  @Output() incremented: EventEmitter<boolean> = new EventEmitter();\r\n  @Output() decremented: EventEmitter<boolean> = new EventEmitter();\r\n\r\n  handleIncrement() {\r\n    this.incremented.emit(true);\r\n  }\r\n  handleDecrement() {\r\n    this.decremented.emit(true);\r\n  }\r\n}\r\n","import { Subscriber } from '../Subscriber';\nexport function distinctUntilChanged(compare, keySelector) {\n    return (source) => source.lift(new DistinctUntilChangedOperator(compare, keySelector));\n}\nclass DistinctUntilChangedOperator {\n    constructor(compare, keySelector) {\n        this.compare = compare;\n        this.keySelector = keySelector;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n    }\n}\nclass DistinctUntilChangedSubscriber extends Subscriber {\n    constructor(destination, compare, keySelector) {\n        super(destination);\n        this.keySelector = keySelector;\n        this.hasKey = false;\n        if (typeof compare === 'function') {\n            this.compare = compare;\n        }\n    }\n    compare(x, y) {\n        return x === y;\n    }\n    _next(value) {\n        let key;\n        try {\n            const { keySelector } = this;\n            key = keySelector ? keySelector(value) : value;\n        }\n        catch (err) {\n            return this.destination.error(err);\n        }\n        let result = false;\n        if (this.hasKey) {\n            try {\n                const { compare } = this;\n                result = compare(this.key, key);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (!result) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    }\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","export class ProductParams {\r\n  brandId = 0;\r\n  typeId = 0;\r\n  sort = 'name';\r\n  pageIndex = 1;\r\n  pageSize = 6;\r\n  search = '';\r\n}\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, of, Subject } from 'rxjs';\r\nimport { IProductBrand } from '../shared/models/product-brand.model';\r\nimport { IProductType } from '../shared/models/product-type.model';\r\nimport { EMPTY_PRODUCT, IPaginatedProducts, IProduct } from '../shared/models/product.model';\r\n\r\nimport { distinctUntilChanged, map, scan, switchMap, tap } from 'rxjs/operators';\r\nimport { ProductParams } from '../shared/models/product-params.model';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IPaginatedResponse } from '../shared/models/paginated-response.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ShopService {\r\n  baseUrl = environment.apiUrl;\r\n  cacheKey = '';\r\n\r\n  private productParams = new BehaviorSubject<ProductParams>(new ProductParams());\r\n  productParams$ = this.productParams.asObservable().pipe(\r\n    distinctUntilChanged((a, b) => this.isParamsEqual(a, b)),\r\n    tap((params) => {\r\n      this.cacheKey = Object.values(params).join('-');\r\n    })\r\n  );\r\n\r\n  private totalProductCount = new BehaviorSubject<number>(0);\r\n  totalProductCount$ = this.totalProductCount.asObservable();\r\n\r\n  private products = new Map<string, IPaginatedResponse<IProduct>>();\r\n  products$ = this.productParams$.pipe(\r\n    switchMap(() => {\r\n      const cachedResponse = this.products.get(this.cacheKey);\r\n      if (cachedResponse) {\r\n        this.totalProductCount.next(cachedResponse.count);\r\n        return of(cachedResponse.data);\r\n      }\r\n      return this.getProducts();\r\n    })\r\n  );\r\n\r\n  private brands = new BehaviorSubject<IProductBrand[]>([]);\r\n  brands$ = this.brands.asObservable();\r\n  private types = new BehaviorSubject<IProductType[]>([]);\r\n  types$ = this.types.asObservable();\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getProducts() {\r\n    let params = new HttpParams();\r\n    if (this.productParams.value.brandId) {\r\n      params = params.set('brandId', this.productParams.value.brandId.toString());\r\n    }\r\n    if (this.productParams.value.typeId) {\r\n      params = params.set('typeId', this.productParams.value.typeId.toString());\r\n    }\r\n    if (this.productParams.value.search) {\r\n      params = params.set('search', this.productParams.value.search.toString());\r\n    }\r\n    params = params.set('sort', this.productParams.value.sort);\r\n    params = params.set('pageIndex', this.productParams.value.pageIndex.toString());\r\n    params = params.set('pageSize', this.productParams.value.pageSize.toString());\r\n\r\n    return this.http\r\n      .get<IPaginatedProducts>(`${this.baseUrl}/products`, { params })\r\n      .pipe(\r\n        map((resp) => {\r\n          this.totalProductCount.next(resp.count);\r\n          this.products.set(this.cacheKey, resp);\r\n          return resp.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getProduct(id: number) {\r\n    const cachedResponse = this.products.get(this.cacheKey);\r\n    if (cachedResponse) {\r\n      const product = cachedResponse.data.find((p) => p.id === id);\r\n      if (product) {\r\n        return of(product);\r\n      }\r\n    }\r\n    // return of(EMPTY_PRODUCT);\r\n    return this.http.get<IProduct>(`${this.baseUrl}/products/${id}`);\r\n  }\r\n\r\n  getBrands() {\r\n    return this.http\r\n      .get<IProductBrand[]>(`${this.baseUrl}/products/brands`)\r\n      .pipe(map((resp) => this.brands.next([{ id: 0, name: 'All' }, ...resp])));\r\n  }\r\n\r\n  getTypes() {\r\n    return this.http\r\n      .get<IProductType[]>(`${this.baseUrl}/products/types`)\r\n      .pipe(map((resp) => this.types.next([{ id: 0, name: 'All' }, ...resp])));\r\n  }\r\n\r\n  updateProductParams(paramUpdates: Partial<ProductParams>) {\r\n    const newParams = { ...this.productParams.value, ...paramUpdates };\r\n    this.productParams.next(newParams);\r\n  }\r\n\r\n  private isParamsEqual(a: ProductParams, b: ProductParams) {\r\n    return (\r\n      a.brandId === b.brandId &&\r\n      a.pageIndex === b.pageIndex &&\r\n      a.pageSize === b.pageSize &&\r\n      a.search === b.search &&\r\n      a.sort === b.sort &&\r\n      a.typeId === b.typeId\r\n    );\r\n  }\r\n}\r\n","<div *ngIf=\"product\" class=\"grid grid-cols-4\">\r\n  <div class=\"col-span-2\">\r\n    <img\r\n      class=\"bg-white w-3/4 m-auto rounded-md shadow-xl\"\r\n      src=\"{{ product.pictureUrl }}.png\"\r\n      alt=\"{{ product.name }}\"\r\n    />\r\n  </div>\r\n\r\n  <div class=\"col-start-3 col-span-2\">\r\n    <h3 class=\"text-3xl pb-4 border-b-2\">{{ product.name }}</h3>\r\n    <p\r\n      class=\"\r\n        mt-4\r\n        px-2\r\n        py-1\r\n        text-green-800\r\n        font-medium\r\n        bg-green-100\r\n        rounded-full\r\n        inline-block\r\n      \"\r\n    >\r\n      {{ product.price | currency }}\r\n    </p>\r\n    <div class=\"flex mt-4 items-center\">\r\n      <app-quantity-count\r\n        [count]=\"productCount\"\r\n        (incremented)=\"incrementQuantity()\"\r\n        (decremented)=\"decrementQuantity()\"\r\n      ></app-quantity-count>\r\n      <button\r\n        (click)=\"addProductsToBasket()\"\r\n        class=\"ml-8 p-2 border rounded-md text-white bg-indigo-600\"\r\n      >\r\n        Add to Cart\r\n      </button>\r\n    </div>\r\n    <div class=\"mt-5\">{{ product.description }}</div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BasketService } from 'src/app/basket/basket.service';\r\nimport { IProduct } from 'src/app/shared/models/product.model';\r\nimport { BreadcrumbService } from 'xng-breadcrumb';\r\nimport { ShopService } from '../shop.service';\r\n\r\n@Component({\r\n  selector: 'app-product-details',\r\n  templateUrl: './product-details.component.html',\r\n  styleUrls: ['./product-details.component.scss'],\r\n})\r\nexport class ProductDetailsComponent implements OnInit {\r\n  product: IProduct | undefined;\r\n  productCount = 1;\r\n\r\n  constructor(\r\n    private shopService: ShopService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private bcService: BreadcrumbService,\r\n    private basketService: BasketService\r\n  ) {\r\n    this.bcService.set('@productDetails', ' ');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadProduct();\r\n  }\r\n\r\n  loadProduct() {\r\n    const idParam = this.activatedRoute.snapshot.paramMap.get('id');\r\n    const productId = idParam ? +idParam : 0;\r\n    this.shopService.getProduct(productId).subscribe(\r\n      (product) => {\r\n        this.product = product;\r\n        this.bcService.set('@productDetails', product.name);\r\n      },\r\n      (err) => {\r\n        console.error(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  incrementQuantity() {\r\n    this.productCount++;\r\n  }\r\n\r\n  decrementQuantity() {\r\n    this.productCount--;\r\n  }\r\n\r\n  addProductsToBasket() {\r\n    this.basketService.addItemToBasket(this.product!, this.productCount);\r\n  }\r\n}\r\n","<div class=\"flex items-center\">\r\n  <p *ngIf=\"totalCount > 0\">\r\n    Showing\r\n    <strong>{{ (pageIndex - 1) * pageSize + 1 }}</strong>\r\n    -\r\n    <ng-container *ngIf=\"totalCount < pageSize * pageIndex; else elseTemplate\">\r\n      <strong>\r\n        {{ totalCount }}\r\n      </strong>\r\n    </ng-container>\r\n    <ng-template #elseTemplate>\r\n      <strong>\r\n        {{ pageIndex * pageSize }}\r\n      </strong>\r\n    </ng-template>\r\n    of\r\n    <strong>{{ totalCount }}</strong>\r\n    products\r\n  </p>\r\n  <p *ngIf=\"totalCount === 0\">There are <strong>0</strong> results.</p>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-pagination-header',\r\n  templateUrl: './pagination-header.component.html',\r\n  styleUrls: ['./pagination-header.component.scss'],\r\n})\r\nexport class PaginationHeaderComponent {\r\n  @Input() totalCount = 0;\r\n  @Input() pageIndex = 1;\r\n  @Input() pageSize = 1;\r\n\r\n  constructor() {}\r\n}\r\n","<div class=\"flex items-center justify-end\">\r\n  <div class=\"flex-1 flex justify-between sm:hidden\">\r\n    <a\r\n      href=\"#\"\r\n      class=\"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500\"\r\n    >\r\n      Previous\r\n    </a>\r\n    <a\r\n      href=\"#\"\r\n      class=\"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500\"\r\n    >\r\n      Next\r\n    </a>\r\n  </div>\r\n  <div>\r\n    <nav class=\"relative z-0 hidden sm:inline-flex rounded-md -space-x-px\" aria-label=\"Pagination\">\r\n      <li\r\n        (click)=\"goToPrevPage()\"\r\n        [class.disabled]=\"isOnFirstPage\"\r\n        class=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 cursor-pointer\"\r\n      >\r\n        <span class=\"sr-only\">Previous</span>\r\n        <!-- Heroicon name: solid/chevron-left -->\r\n        <svg\r\n          class=\"h-5 w-5\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 20 20\"\r\n          fill=\"currentColor\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <path\r\n            fill-rule=\"evenodd\"\r\n            d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\r\n            clip-rule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </li>\r\n\r\n      <li\r\n        *ngFor=\"let page of pages\"\r\n        [class.active]=\"page === pageIndex\"\r\n        (click)=\"selectPage(page)\"\r\n        class=\"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer\"\r\n      >\r\n        {{ page }}\r\n      </li>\r\n\r\n      <li\r\n        (click)=\"goToNextPage()\"\r\n        [class.disabled]=\"isOnLastPage\"\r\n        class=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 cursor-pointer\"\r\n      >\r\n        <span class=\"sr-only\">Next</span>\r\n        <!-- Heroicon name: solid/chevron-right -->\r\n        <svg\r\n          class=\"h-5 w-5\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 20 20\"\r\n          fill=\"currentColor\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <path\r\n            fill-rule=\"evenodd\"\r\n            d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\r\n            clip-rule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </li>\r\n    </nav>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-pagination',\r\n  templateUrl: './pagination.component.html',\r\n  styleUrls: ['./pagination.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class PaginationComponent {\r\n  @Input()\r\n  public set totalCount(value: number) {\r\n    if (value >= 0) {\r\n      this._totalCount = value;\r\n      this.updateState();\r\n    }\r\n  }\r\n  public get totalCount(): number {\r\n    return this._totalCount;\r\n  }\r\n  private _totalCount: number = 0;\r\n\r\n  @Input()\r\n  public set pageSize(value: number) {\r\n    if (value > 0) {\r\n      this._pageSize = value;\r\n      this.updateState();\r\n    }\r\n  }\r\n  public get pageSize(): number {\r\n    return this._pageSize;\r\n  }\r\n  private _pageSize: number = 1;\r\n\r\n  @Input() pageIndex: number = 1;\r\n\r\n  @Output() pageSelected = new EventEmitter<number>();\r\n\r\n  isOnFirstPage: boolean = true;\r\n  isOnLastPage: boolean = false;\r\n  pages: number[] = [];\r\n  pageCount: number = 0;\r\n\r\n  constructor() {}\r\n\r\n  selectPage(pageIndex: number) {\r\n    this.pageSelected.emit(pageIndex);\r\n    this.isOnFirstPage = pageIndex === 1;\r\n    this.isOnLastPage = pageIndex === this.pageCount;\r\n  }\r\n\r\n  goToNextPage() {\r\n    this.selectPage(this.pageIndex + 1);\r\n  }\r\n  goToPrevPage() {\r\n    this.selectPage(this.pageIndex - 1);\r\n  }\r\n\r\n  private updateState() {\r\n    const pageCount = Math.ceil(this._totalCount / this.pageSize);\r\n    this.pages = new Array(pageCount).fill(null).map((_, i) => i + 1);\r\n    this.pageCount = this.pages.length;\r\n    this.isOnFirstPage = this.pageIndex === 1;\r\n    this.isOnLastPage = this.pageIndex === this.pageCount || this.pageCount === 0;\r\n  }\r\n}\r\n","import { IPaginatedResponse } from './paginated-response.model';\r\n\r\nexport interface IProduct {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  pictureUrl: string;\r\n  productType: string;\r\n  productBrand: string;\r\n}\r\n\r\nexport const EMPTY_PRODUCT: IProduct = {\r\n  id: 0,\r\n  name: '',\r\n  description: '',\r\n  price: -1,\r\n  pictureUrl: '',\r\n  productType: '',\r\n  productBrand: '',\r\n};\r\n\r\nexport type IPaginatedProducts = IPaginatedResponse<IProduct>;\r\n","import { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\r\nimport { BasketService } from 'src/app/basket/basket.service';\r\nimport { EMPTY_PRODUCT, IProduct } from 'src/app/shared/models/product.model';\r\n\r\n@Component({\r\n  selector: 'app-product-item',\r\n  templateUrl: './product-item.component.html',\r\n  styleUrls: ['./product-item.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ProductItemComponent {\r\n  @Input() product: IProduct = EMPTY_PRODUCT;\r\n\r\n  constructor(private basketService: BasketService) {}\r\n\r\n  addItemToBasket() {\r\n    this.basketService.addItemToBasket(this.product);\r\n  }\r\n}\r\n","<li\r\n  class=\"col-span-1 flex flex-col text-center bg-white rounded-lg shadow-md divide-y divide-gray-200 h-80\"\r\n>\r\n  <div class=\"flex-1 flex flex-col p-8 pb-4\">\r\n    <picture\r\n      class=\"w-32 h-32 flex-shrink-0 mx-auto bg-gray-50 ring-2 ring-gray-200 ring-offset-4 rounded-full\"\r\n    >\r\n      <source srcset=\"{{ product.pictureUrl }}.webp\" type=\"image/webp\" />\r\n      <source srcset=\"{{ product.pictureUrl }}.png\" type=\"image/png\" />\r\n      <img src=\"{{ product.pictureUrl }}.png\" alt=\"{{ product.name }}\" />\r\n    </picture>\r\n    <a routerLink=\"/shop/{{ product.id }}\">\r\n      <h3 class=\"sr-only\">Product Name</h3>\r\n      <h3 class=\"mt-6 text-gray-900 text-sm font-medium truncate\" title=\"{{ product.name }}\">\r\n        {{ product.name }}\r\n      </h3>\r\n    </a>\r\n    <dl class=\"mt-1 flex-grow flex flex-col justify-between\">\r\n      <dt class=\"sr-only\">Product Price</dt>\r\n      <dd class=\"mt-3\">\r\n        <span class=\"px-2 py-1 text-green-800 font-medium bg-green-100 rounded-full\">\r\n          {{ product.price | currency }}\r\n        </span>\r\n      </dd>\r\n    </dl>\r\n  </div>\r\n  <div>\r\n    <div class=\"-mt-px flex divide-x divide-gray-200\">\r\n      <div class=\"w-0 flex-1 flex\">\r\n        <button\r\n          (click)=\"addItemToBasket()\"\r\n          class=\"relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-700 font-medium border border-transparent rounded-bl-lg hover:text-gray-500\"\r\n        >\r\n          <!-- Heroicon name: outline/shopping-bag -->\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            class=\"h-6 w-6 text-gray-400\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n            />\r\n          </svg>\r\n          <span class=\"ml-3\">Shop</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"-ml-px w-0 flex-1 flex\">\r\n        <a\r\n          href=\"#\"\r\n          routerLink=\"/shop/{{ product.id }}\"\r\n          class=\"relative w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-700 font-medium border border-transparent rounded-br-lg hover:text-gray-500\"\r\n        >\r\n          <!-- Heroicon name: solid/phone -->\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            class=\"h-6 w-6 text-gray-400\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n            />\r\n          </svg>\r\n          <span class=\"ml-3\">View</span>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</li>\r\n","<!-- This example requires Tailwind CSS v2.0+ -->\r\n\r\n<ng-container *ngIf=\"vm$ | async as vm\">\r\n  <div class=\"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\">\r\n    <div *ngIf=\"types$ && brands$\" class=\"row-start-2 row-span-1\">\r\n      <nav\r\n        class=\"px-2 py-5 space-y-8 sticky top-24 bg-white rounded-lg shadow-md\"\r\n        aria-label=\"Sidebar\"\r\n      >\r\n        <div class=\"space-y-1\">\r\n          <h3\r\n            class=\"px-3 mb-1 text-sm font-semibold text-indigo-700 uppercase tracking-wider\"\r\n            id=\"projects-headline\"\r\n          >\r\n            Sort\r\n          </h3>\r\n          <div class=\"space-y-1 flex flex-row\" role=\"group\" aria-labelledby=\"projects-headline\">\r\n            <select\r\n              id=\"sort\"\r\n              name=\"sort\"\r\n              (change)=\"onSortSelected($event)\"\r\n              class=\"flex-1 mx-3 my-2 block w-auto pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n            >\r\n              <option\r\n                *ngFor=\"let sort of sortOptions\"\r\n                [value]=\"sort.value\"\r\n                [selected]=\"vm.productParams.sort === sort.value\"\r\n              >\r\n                {{ sort.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"space-y-1\">\r\n          <h3\r\n            class=\"px-3 mb-1 text-sm font-semibold text-indigo-700 uppercase tracking-wider\"\r\n            id=\"projects-headline\"\r\n          >\r\n            Brands\r\n          </h3>\r\n          <div class=\"space-y-1\" role=\"group\" aria-labelledby=\"projects-headline\">\r\n            <li\r\n              *ngFor=\"let brand of brands$ | async\"\r\n              [class.active]=\"vm.productParams.brandId === brand.id\"\r\n              [value]=\"brand.id\"\r\n              (click)=\"onBrandSelected(brand.id)\"\r\n              class=\"group flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50 cursor-pointer\"\r\n            >\r\n              <span class=\"truncate\"> {{ brand.name }} </span>\r\n            </li>\r\n          </div>\r\n        </div>\r\n        <div class=\"space-y-1\">\r\n          <h3\r\n            class=\"px-3 mb-1 text-sm font-semibold text-indigo-700 uppercase tracking-wider\"\r\n            id=\"projects-headline\"\r\n          >\r\n            Types\r\n          </h3>\r\n          <div class=\"space-y-1\" role=\"group\" aria-labelledby=\"projects-headline\">\r\n            <li\r\n              *ngFor=\"let type of types$ | async\"\r\n              [class.active]=\"vm.productParams.typeId === type.id\"\r\n              [value]=\"type.id\"\r\n              (click)=\"onTypeSelected(type.id)\"\r\n              href=\"#\"\r\n              class=\"group flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50 cursor-pointer\"\r\n            >\r\n              <span class=\"truncate\"> {{ type.name }}</span>\r\n            </li>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n\r\n    <div class=\"placeholder-transparent\"></div>\r\n\r\n    <app-pagination-header\r\n      [ngClass]=\"{ 'placeholder-transparent': vm.productParams && vm.totalProductCount }\"\r\n      [pageIndex]=\"vm.productParams.pageIndex\"\r\n      [pageSize]=\"vm.productParams.pageSize\"\r\n      [totalCount]=\"vm.totalProductCount\"\r\n      class=\"col-start-2 sm:col-span-1 md:col-span-1 lg:col-span-2 flex\"\r\n    ></app-pagination-header>\r\n\r\n    <div class=\"max-w-lg w-full lg:max-w-xs\">\r\n      <label for=\"search\" class=\"sr-only\">Search</label>\r\n      <div class=\"relative text-gray-400 focus-within:text-gray-500\">\r\n        <div class=\"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center\">\r\n          <svg\r\n            class=\"h-5 w-5\"\r\n            x-description=\"Heroicon name: solid/search\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"currentColor\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <path\r\n              fill-rule=\"evenodd\"\r\n              d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\r\n              clip-rule=\"evenodd\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n        <input\r\n          id=\"search\"\r\n          value=\"{{ searchTerm$ | async }}\"\r\n          (keyup.enter)=\"onSearch($event)\"\r\n          (blur)=\"onSearchBoxBlur($event)\"\r\n          class=\"block w-full bg-white py-2 pl-10 pr-3 border border-gray-300 rounded-md leading-5 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 focus:placeholder-gray-500 sm:text-sm\"\r\n          placeholder=\"Search\"\r\n          type=\"search\"\r\n          name=\"search\"\r\n        />\r\n        <div\r\n          *ngIf=\"vm.productParams.search\"\r\n          (click)=\"onReset()\"\r\n          class=\"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer\"\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            class=\"h-6 w-6 transition-all duration-500 ease-in-out\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M6 18L18 6M6 6l12 12\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <ul\r\n      [class.empty]=\"vm.totalProductCount === 0\"\r\n      class=\"col-start-2 row-start-2 col-span-3 grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3\"\r\n    >\r\n      <app-product-item\r\n        *ngFor=\"let product of vm.products; trackBy: trackByProductId\"\r\n        [product]=\"product\"\r\n      ></app-product-item>\r\n    </ul>\r\n\r\n    <app-pagination\r\n      class=\"col-start-2 col-span-3\"\r\n      [totalCount]=\"vm.totalProductCount\"\r\n      [pageIndex]=\"vm.productParams.pageIndex\"\r\n      [pageSize]=\"vm.productParams.pageSize\"\r\n      (pageSelected)=\"onPageChanged($event)\"\r\n    ></app-pagination>\r\n  </div>\r\n</ng-container>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ProductDetailsComponent } from './product-details/product-details.component';\r\nimport { ShopComponent } from './shop.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: ShopComponent },\r\n  {\r\n    path: ':id',\r\n    component: ProductDetailsComponent,\r\n    data: { breadcrumb: { alias: 'productDetails' } },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ShopRoutingModule {}\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { IProductBrand } from '../shared/models/product-brand.model';\r\nimport { IProductType } from '../shared/models/product-type.model';\r\nimport { IProductSort } from '../shared/models/product-sort.model';\r\nimport { IProduct } from '../shared/models/product.model';\r\nimport { ShopService } from './shop.service';\r\nimport { ProductParams } from '../shared/models/product-params.model';\r\nimport { combineLatest, Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-shop',\r\n  templateUrl: './shop.component.html',\r\n  styleUrls: ['./shop.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ShopComponent implements OnInit {\r\n  brands$: Observable<IProductBrand[]>;\r\n  types$: Observable<IProductType[]>;\r\n  products$: Observable<IProduct[]>;\r\n  productParams$: Observable<ProductParams>;\r\n  totalProductCount$: Observable<number>;\r\n  vm$: Observable<{\r\n    products: IProduct[];\r\n    productParams: ProductParams;\r\n    totalProductCount: number;\r\n  }>;\r\n\r\n  searchTerm$: Observable<string>;\r\n  sortOptions: IProductSort[] = [\r\n    { name: 'Name: A to Z', value: 'name' },\r\n    { name: 'Price: Low to High', value: 'priceAsc' },\r\n    { name: 'Price: High to Low', value: 'priceDesc' },\r\n  ];\r\n\r\n  constructor(private shopService: ShopService) {\r\n    this.brands$ = this.shopService.brands$;\r\n    this.types$ = this.shopService.types$;\r\n    this.products$ = this.shopService.products$;\r\n    this.productParams$ = this.shopService.productParams$;\r\n    this.searchTerm$ = this.productParams$.pipe(map((params) => params.search));\r\n    this.totalProductCount$ = this.shopService.totalProductCount$;\r\n    this.vm$ = combineLatest([this.products$, this.productParams$, this.totalProductCount$]).pipe(\r\n      map((obs) => {\r\n        return { products: obs[0], productParams: obs[1], totalProductCount: obs[2] };\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.shopService.getBrands().subscribe();\r\n    this.shopService.getTypes().subscribe();\r\n  }\r\n\r\n  onBrandSelected(brandId: number) {\r\n    this.shopService.updateProductParams({ brandId, pageIndex: 1 });\r\n  }\r\n\r\n  onTypeSelected(typeId: number) {\r\n    this.shopService.updateProductParams({ typeId });\r\n  }\r\n\r\n  onSortSelected(event: Event) {\r\n    const target = event.target as HTMLSelectElement;\r\n    this.shopService.updateProductParams({ sort: target.value });\r\n  }\r\n\r\n  onPageChanged(pageIndex: number) {\r\n    this.shopService.updateProductParams({ pageIndex });\r\n  }\r\n\r\n  onSearch(event: Event) {\r\n    const searchBox = event.target as HTMLInputElement;\r\n    this.shopService.updateProductParams({ search: searchBox.value, pageIndex: 1 });\r\n  }\r\n\r\n  onReset() {\r\n    this.shopService.updateProductParams({ search: '' });\r\n  }\r\n\r\n  onSearchBoxBlur(event: Event) {\r\n    const searchBox = event.target as HTMLInputElement;\r\n    if (!searchBox.value) {\r\n      this.shopService.updateProductParams({ search: '', pageIndex: 1 });\r\n    }\r\n  }\r\n\r\n  trackByProductId(index: number, product: IProduct) {\r\n    return product.id;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ShopRoutingModule } from './shop-routing.module';\r\nimport { ShopComponent } from './shop.component';\r\nimport { ProductItemComponent } from './product-item/product-item.component';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ProductDetailsComponent } from './product-details/product-details.component';\r\n\r\n@NgModule({\r\n  declarations: [ShopComponent, ProductItemComponent, ProductDetailsComponent],\r\n  imports: [CommonModule, ShopRoutingModule, SharedModule, FormsModule],\r\n})\r\nexport class ShopModule {}\r\n"],"sourceRoot":"webpack:///"}